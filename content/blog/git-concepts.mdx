---
title: Nhá»¯ng tÃ¬nh huá»‘ng thÆ°á»ng gáº·p khi lÃ m viá»‡c vá»›i Git
description: Trong bÃ i viáº¿t trÆ°á»›c, mÃ¬nh Ä‘Ã£ giá»›i thiá»‡u tá»›i má»i ngÆ°á»i vá» má»™t sá»‘ cÃ¢u lá»‡nh Git thÆ°á»ng dÃ¹ng, á»Ÿ bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u má»™t sá»‘ tÃ¬nh huá»‘ng thÆ°á»ng gáº·p khi lÃ m viá»‡c vá»›i Git nhÃ©, gÃ©t gÃ´!
image: /images/blog/blog-post-3.jpg
date: "2024-02-22"
tags:
  - Git
series:
  order: 2
  title: "Git"
authors:
  - taitd
---

Trong bÃ i viáº¿t trÆ°á»›c, mÃ¬nh Ä‘Ã£ giá»›i thiá»‡u tá»›i má»i ngÆ°á»i vá» má»™t sá»‘ cÃ¢u lá»‡nh Git thÆ°á»ng dÃ¹ng, á»Ÿ bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u má»™t sá»‘ tÃ¬nh huá»‘ng thÆ°á»ng gáº·p khi lÃ m viá»‡c vá»›i Git nhÃ©, gÃ©t gÃ´!

## 1. Xá»­ lÃ½ conflict

Tokuda vÃ  Tháº£o lÃ  hai dev cÃ¹ng lÃ m viá»‡c trÃªn project `japan-antivirus`, má»™t ngÃ y Ä‘áº¹p trá»i Ã´ng leader vá»— vai Tháº£o vÃ  Tokuda:

> "Tokuda, chÃº sá»­a chá»©c nÄƒng chá»‰nh sá»­a nhÃ¢n viÃªn nhÃ©, thÃªm trÆ°á»ng ABC vÃ o thÃ´ng tin nhÃ¢n viÃªn cho anh"

> "ÃŠ Tháº£o, em sá»­a giÃºp anh chá»©c nÄƒng view thÃ´ng tin nhÃ¢n viÃªn, thÃªm check quyá»n vÃ o nhÃ©!"

Tháº¿ lÃ  Tokuda vÃ  Tháº£o checkout code tá»« branch `dev`, Tokuda lÃ m viá»‡c trÃªn branch `feature/add-user-fields`, cÃ²n Tháº£o lÃ m viá»‡c trÃªn branch `feature/add-check-user-authority`, tuy nhiÃªn thÃ¬ cáº£ Tokuda vÃ  Tháº£o Ä‘á»u sá»­a vÃ o line 69 cá»§a file `user.ts`

Do Tokuda pro hÆ¡n nÃªn Ä‘Ã£ hoÃ n thÃ nh task sá»›m, branch `feature/add-user-fields` cá»§a Tokuda nhanh chÃ³ng Ä‘Æ°á»£c merge vÃ o `dev`, má»i chuyá»‡n váº«n á»•n cho Ä‘áº¿n khi Tháº£o táº¡o merge request `feature/add-check-user-authority` vÃ o `dev`.

Äáº­p vÃ o máº¯t Tháº£o lÃ  error `CONFLICT (content): Merge conflict in user.ts`, lÃºc nÃ y thay vÃ¬ chá»­i thá» thÃ¬ Tháº£o cáº§n pháº£i thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau:

### 1.1. XÃ¡c Ä‘á»‹nh Ä‘oáº¡n code bá»‹ conflict:

Sá»­ dá»¥ng `git status` Ä‘á»ƒ tÃ¬m cÃ¡c file bá»‹ conflict

Trong file `user.ts`, Tháº£o tháº¥y ná»™i dung nhÆ° sau:

```shell
<<<<<<< HEAD (Current Change)
code of Tokuda
=======
code of Tháº£o

>>>>>>> feature/add-check-user-authority (Incoming Change)
```

### 1.2. Giáº£i quyáº¿t conflict

Trao Ä‘á»•i vá»›i Tokuda, xem cáº§n giá»¯ Ä‘oáº¡n code cá»§a Tháº£o, hay Ä‘oáº¡n code cá»§a Tokuda, hay lÃ  káº¿t há»£p cáº£ 2, sau Ä‘Ã³ loáº¡i bá» dáº¥u `<<<<<<<`, `=======`, vÃ  `>>>>>>>`

Sá»­ dá»¥ng lá»‡nh `git add user.ts` vÃ  `git commit` Ä‘á»ƒ hoÃ n táº¥t quÃ¡ trÃ¬nh merge

### 1.3. Kiá»ƒm tra láº¡i vÃ  push lÃªn remote

DÃ¹ng `git status` Ä‘á»ƒ check láº¡i xem cÃ²n conflict chÆ°a Ä‘Æ°á»£c xá»­ lÃ½ khÃ´ng.

Náº¿u cÃ²n, quay vá» bÆ°á»›c 1, náº¿u khÃ´ng, sá»­ dá»¥ng `git push` Ä‘á»ƒ Ä‘áº©y nhá»¯ng thay Ä‘á»•i Ä‘Ã£ merge lÃªn remote

> ChÃº Ã½: Äá»ƒ háº¡n cháº¿ conflict code báº¡n cáº§n thÆ°á»ng xuyÃªn pull code vÃ  commit code

## 2. Xem lá»‹ch sá»­ commit vÃ  lá»‹ch sá»­ hoáº¡t Ä‘á»™ng trÃªn git

Sá»­ dá»¥ng `git log` Ä‘á»ƒ xem lá»‹ch sá»­ commit nhÆ° hash commit, ngÆ°á»i commit, thá»i gian commit, message cá»§a commit

```shell
commit 5841451a6c7fdca8f1989903b41df2c0a6d6b1a2 (HEAD -> dev, origin/dev)
Merge: c51185c0d 4bee07ebd
Author: taitd-gms <117064867+tokuda69@users.noreply.github.com>
Date:   Fri Mar 1 13:11:03 2023 +0700

    Merge branch 'feature/add-user-fields' into dev
```

`git reflog` nhÆ° má»™t activity history, giÃºp lÆ°u láº¡i cÃ¡c hoáº¡t Ä‘á»™ng Ä‘Ã£ thao tÃ¡c trÃªn git, vÃ­ dá»¥ nhÆ° Tokuda vá»«a checkout qua nhÃ¡nh master, hay lÃ  Tháº£o vá»«a reset má»™t commit,... `git reflog` ráº¥t há»¯u Ã­ch cho nhá»¯ng sai láº§m trong quÃ¡ trÃ¬nh sá»­ dá»¥ng git (mÃ¬nh cÃ³ vÃ­ dá»¥ má»™t sai láº§m á»Ÿ tÃ¬nh huá»‘ng 4)

```shell
a8b203598 HEAD@{14}: pull --ff --recurse-submodules --progress origin: Fast-forward
868709494 HEAD@{15}: commit (merge): Merge branch 'staging' into feature/add-user-fields
b8da84ed4 HEAD@{16}: reset: moving to b8da84ed4719f09d462c9a5d2dc4723ab4d2362c
694f23568 HEAD@{17}: commit (merge): Merge branch 'staging' into feature/add-user-fields
b8da84ed4 HEAD@{18}: reset: moving to HEAD
b8da84ed4 HEAD@{19}: merge staging: Merge made by the 'ort' strategy.
dcf422a6e HEAD@{20}: checkout: moving from dev to feature/add-user-fields
441773340 HEAD@{21}: reset: moving to HEAD
441773340 HEAD@{22}: merge staging: Merge made by the 'ort' strategy.
```

## 3. XÃ³a commit

Sau má»™t ngÃ y dÃ i miá»‡t mÃ i mÃºa code, cuá»‘i cÃ¹ng thÃ¬ Tháº£o cÅ©ng Ä‘Ã£ hoÃ n thÃ nh task, Tháº£o commit code vÃ  Ä‘i ngá»§.

HÃ´m sau Tháº£o má»Ÿ láº¡i code vÃ  tháº¥y code cá»§a mÃ¬nh trÃ´ng pháº£n cáº£m vl, Tháº£o cáº§n sá»­a láº¡i cho vá»Ÿ sáº¡ch chá»¯ Ä‘áº¹p.
TrÆ°á»ng há»£p chá»‰ cáº§n chá»‰nh sá»­a code thÃ´i thÃ¬ Tháº£o cÃ³ thá»ƒ sá»­ dá»¥ng `git reset`, cÃ²n háº¿t cá»©u thÃ¬ Tháº£o cÃ³ thá»ƒ sá»­ dá»¥ng `git revert` ğŸ¤£

`git reset` cÃ³ vÃ i option nhÆ° `mixed` (máº·c Ä‘á»‹nh náº¿u khÃ´ng truyá»n option), `--soft` vÃ  `--hard`

```shell
git reset <commit>: #giá»¯ láº¡i cÃ¡c thay Ä‘á»•i Ä‘Ã£ commit trong staging
git reset --soft <commit>: #giá»¯ láº¡i cÃ¡c thay Ä‘á»•i trong working directory
git reset --hard <commit>: #loáº¡i bá» táº¥t cáº£ thay Ä‘á»•i, cáº£ trong working directory vÃ  staging
```

## 4. KhÃ´i phá»¥c commit

NhÆ° á»Ÿ tÃ¬nh huá»‘ng 3, Tháº£o muá»‘n reset commit Ä‘á»ƒ chá»‰nh sá»­a code thÃ´i nhÆ°ng Tháº£o láº¡i "nhá»¡ tay" `--hard` khiáº¿n cho code bá»‹ bay mÃ u háº¿t, Tháº£o lÃºng tÃºng cáº§u cá»©u anh Leader, anh Leader Ä‘Ã£ hÆ°á»›ng dáº«n Tháº£o láº¥y láº¡i code vá»›i cÃ¡c thao tÃ¡c nhÆ° sau:

Sá»­ dá»¥ng git reflog Ä‘á»ƒ láº¥y hash commit:

```shell
627f5d1 (HEAD -> master, conflict-2) HEAD@{0}: reset: moving to 627f5d161bff441840d5b34a77abe16561f505f8
ec02ce2 HEAD@{1}: reset: moving to HEAD@{1}
```

Sá»­ dá»¥ng `git reset --hard` Ä‘á»ƒ khÃ´i phá»¥c commit:

```shell
git reset --hard ec02ce2
```

TÃ¨o vui má»«ng hÃ² reo cáº£m Æ¡n anh Leader rÃ­u rÃ­t

## 5: Gá»™p nhiá»u commit láº¡i thÃ nh 1 commit

TÃ­ Ä‘Æ°á»£c giao má»™t nhiá»‡m vá»¥ lÃ  quáº£n lÃ½ users bao gá»“m CRUD. TÃ­ nghe lá»i dáº·n cá»§a anh Leader lÃ  "code pháº£i commit code liÃªn tá»¥c nha em"

TÃ­ táº¡o file userRouter, TÃ­ commit

TÃ­ táº¡o tiáº¿p file userController, TÃ­ commit tiáº¿p

TÃ­ táº¡o file userService, TÃ­ láº¡i tiáº¿p tá»¥c commit

TÃ­ lÃ m xong task vÃ  hÃ­ ha hÃ­ há»­ng Ä‘Æ°a qua anh Leader Ä‘á»ƒ review code, anh Leader nhÃ¬n vÃ o Pull Request thÃ¬ bÃ¨n nÃ³i ráº±ng: "Em gá»™p láº¡i cÃ¡c commit thÃ nh 1 cho anh nhÃ©, commit liÃªn tá»¥c lÃ  cáº§n thiáº¿t nhÆ°ng cáº§n pháº£i commit há»£p lÃ½, trÃ¡nh dÆ° thá»«a hoáº·c trÃ¹ng láº·p quÃ¡ nhiá»u"

TÃ­ loay hoay vÃ  suy nghÄ© trong Ä‘áº§u: "Váº­y gá»™p nhÆ° lÃ m tháº¿ nÃ o bÃ¢y giá»?"

ThÃ´i chuyá»‡n gÃ¬ cÅ©ng tá»›i tay anh Leader, anh Leader tiáº¿p tá»¥c hÆ°á»›ng dáº«n TÃ­ gá»™p commit, thao tÃ¡c nhÆ° sau:

Sá»­ dá»¥ng git rebase

```shell
git rebase -i HEAD^n #n lÃ  sá»‘ commit muá»‘n gá»™p
```

Git sáº½ má»Ÿ má»™t cá»­a sá»• tÆ°Æ¡ng tÃ¡c, chá»n cÃ¡c commit cáº§n gá»™p chuyá»ƒn pick thÃ nh squash vÃ  lÆ°u láº¡i
Git tiáº¿p tá»¥c má»Ÿ má»™t cá»­a sá»• tÆ°Æ¡ng tÃ¡c, chá»n message hoáº·c nháº­p message commit tÃ¹y Ã½ vÃ  lÆ°u láº¡i. Done

## 6. Chá»‰nh sá»­a message commit

Má»™t láº§n TÃ­ commit nháº§m message vÃ  TÃ­ chá»‰nh sá»­a láº¡i Ä‘Æ°á»£c message Ä‘Ã³. TÃ­ vui láº¯m, TÃ­ liá»n chia sáº» lÃªn diá»…n Ä‘Ã n X, tÃ¡c giáº£ (lÃ  mÃ¬nh) tÃ¬nh cá» tháº¥y bÃ i chia sáº» Ä‘Ã³ cá»§a TÃ­ nÃªn copy paste vÃ o Ä‘Ã¢y. CÃ¡ch xá»­ lÃ½ cá»§a TÃ­ nhÆ° sau:

Äá»‘i vá»›i message má»›i nháº¥t: sá»­ dá»¥ng `git commit --amend -m "new_message"` (chá»‰ Ä‘á»•i Ä‘Æ°á»£c message cá»§a commit má»›i nháº¥t thÃ´i)

Äá»‘i vá»›i nhiá»u message cÃ¹ng lÃºc, cÅ© má»›i Ä‘á»u Ä‘Æ°á»£c:

Sá»­ dá»¥ng `git rebase -i HEAD~n (n lÃ  sá»‘ commit muá»‘n Ä‘á»•i message)`
Git sáº½ má»Ÿ má»™t cá»­a sá»• tÆ°Æ¡ng tÃ¡c, báº¡n Ä‘á»•i pick sang reword cho nhá»¯ng commit muá»‘n Ä‘á»•i, lÆ°u láº¡i
Git tiáº¿p tá»¥c má»Ÿ má»™t cá»­a sá»• tÆ°Æ¡ng tÃ¡c, báº¡n Ä‘á»•i message má»›i vÃ  lÆ°u láº¡i, bao nhiÃªu commit muá»‘n Ä‘á»•i thÃ¬ cÃ³ báº¥y nhiÃªu cá»­a sá»• tÆ°Æ¡ng tÃ¡c má»Ÿ ra Ä‘á»ƒ Ä‘á»•i message

## 7. Äá»•i tÃªn branch

Láº¡i má»™t láº§n khÃ¡c, TÃ­ Ä‘áº·t nháº§m tÃªn nhÃ¡nh vÃ  TÃ­ chá»‰nh sá»­a láº¡i Ä‘Æ°á»£c tÃªn branch Ä‘Ã³. TÃ­ vui láº¯m, TÃ­ liá»n chia sáº» lÃªn diá»…n Ä‘Ã n X, tÃ¡c giáº£ (lÃ  mÃ¬nh) láº¡i tÃ¬nh cá» tháº¥y bÃ i chia sáº» Ä‘Ã³ cá»§a TÃ­ nÃªn copy paste vÃ o Ä‘Ã¢y. CÃ¡ch xá»­ lÃ½ cá»§a TÃ­ nhÆ° sau:

Náº¿u Ä‘áº·t sai tÃªn nhÃ¡nh, vui lÃ²ng nháº­p lá»‡nh sau: `git branch -m new_branch`

## 8: KhÃ´ng thá»ƒ checkout qua nhÃ¡nh khÃ¡c

TÃ­ vÃ  TÃ¨o lÃ  hai báº¡n thá»±c táº­p sinh cá»§a cÃ´ng ty A Bá» Cá», TÃ­ vÃ o trÆ°á»›c TÃ¨o 2 ngÃ y

Má»™t ngÃ y ná», TÃ¨o Ä‘ang code á»Ÿ nhÃ¡nh auth nhÆ°ng cÅ©ng hÃ³ng há»›t checkout qua nhÃ¡nh user cá»§a TÃ­ Ä‘á»ƒ xem TÃ­ code tá»›i Ä‘Ã¢u rá»“i vÃ¬ nhÃ¡nh cá»§a TÃ¨o cÃ³ phá»¥ thuá»™c vÃ o nhÃ¡nh cá»§a TÃ­

TÃ¨o nháº­p lá»‡nh git checkout user, BÃ™M, khÃ´ng checkout qua Ä‘Æ°á»£c vÃ  lá»—i nÃ y xuáº¥t hiá»‡n error: Your local changes to the following files would be overwritten by checkout: auth.js Please commit your changes or stash them before you switch branches. Aborting

TÃ¨o khÃ³ hiá»ƒu, TÃ¨o bÃ¨n quay sang há»i TÃ­ vÃ¬ TÃ­ lÃ m trÆ°á»›c TÃ¨o 2 ngÃ y nÃªn nghÄ© ráº±ng TÃ­ sáº½ biáº¿t cÃ¡ch xá»­ lÃ½

TÃ­ nhÃ¬n vÃ o lá»—i vÃ  phÃ¡n ráº±ng: "Cháº¯c lá»—i gÃ¬ rá»“i, thá»­ xÃ³a háº¿t code xem sao". Anh Leader káº¿ bÃªn giáº­t báº¯n ngÆ°á»i, tháº¿ lÃ  Ä‘Ã nh quay qua giáº£i quyáº¿t cho 2 Ä‘á»©a chÆ°a tráº£i sá»± Ä‘á»i nÃ y

Anh Leader nÃ³i: "TÃ¨o khÃ´ng thá»ƒ checkout qua nhÃ¡nh khÃ¡c lÃ  do TÃ¨o Ä‘ang code dá»Ÿ tay á»Ÿ nhÃ¡nh hiá»‡n táº¡i, Ä‘á»ƒ TÃ¨o cÃ³ thá»ƒ checkout qua nhÃ¡nh khÃ¡c thÃ¬ cáº§n pháº£i commit code trÆ°á»›c"

TÃ¨o Ä‘Ã¡p ráº±ng: "Em chÆ°a muá»‘n commit code vÃ¬ chÆ°a code xong áº¡"

Anh Leader nÃ³i tiáº¿p: "OK em. váº­y dÃ¹ng cho anh git stash nhÃ©"

`git stash` giÃºp cáº¥t giá»¯ code táº¡m thá»i vÃ  sau Ä‘Ã³ khi quay láº¡i dev tiáº¿p thÃ¬ sá»­ dá»¥ng `git stash pop`

## 9. KhÃ´i phá»¥c tráº¡ng thÃ¡i trÆ°á»›c khi merge

Ai cÅ©ng sáº½ cÃ³ sai láº§m vÃ  anh Leader cÅ©ng váº­y

Anh Leader cÃ³ giao cho TÃ­ má»™t task vÃ  sau khi TÃ­ lÃ m xong thÃ¬ anh Leader merge vÃ o nhÃ¡nh dev

Sau khi merge thÃ¬ anh Leader phÃ¡t hiá»‡n code khÃ´ng hoáº¡t Ä‘á»™ng nhÆ° Ã½ muá»‘n. Tháº¿ lÃ  anh Leader dÃ¹ng lá»‡nh: `git reset --hard ORIG_HEAD` Ä‘á»ƒ xÃ³a cÃ¡c commit vá»«a merge vÃ  nÃ³i TÃ­ chá»‰nh sá»­a láº¡i code

## 10. Merge má»™t commit báº¥t ká»³ vÃ o nhÃ¡nh khÃ¡c

TÃ¨o Ä‘Æ°á»£c giao lÃ m task lÃ  quáº£n lÃ½ product

TÃ¨o hoÃ n thÃ nh tÃ­nh nÄƒng create product, TÃ¨o commit

TÃ¨o hoÃ n thÃ nh tÃ­nh nÄƒng view product, TÃ¨o commit

TÃ¨o hoÃ n thÃ nh tÃ­nh nÄƒng update product, TÃ¨o commit

TÃ¨o Ä‘ang lÃ m tÃ­nh nÄƒng delete product, TÃ¨o chÆ°a commit ...

LÃºc nÃ y khÃ¡ch hÃ ng alo cho anh Leader: "ChÃº release tÃ­nh nÄƒng create product vÃ  view product gáº¥p cho anh nhÃ©"

Anh Leader quÃ¡ quen vá»›i viá»‡c khÃ¡ch hÃ ng yÃªu cáº§u báº¥t ngá» rá»“i, anh Leader liá»n dÃ¹ng lá»‡nh `git cherry-pick <commit>` Ä‘á»ƒ merge 2 commit Ä‘Ã³ vÃ o nhÃ¡nh main Ä‘á»ƒ release cho khÃ¡ch hÃ ng

`git cherry-pick` lÃ  má»™t lá»‡nh git há»¯u Ã­ch dÃ¹ng cho trÆ°á»ng há»£p muá»‘n merge commit báº¥t ká»³ vÃ o nhÃ¡nh khÃ¡c thay vÃ¬ toÃ n bá»™ branch (trong trÆ°á»ng há»£p `git cherry-pick` bá»‹ conflict, dÃ¹ng lá»‡nh `git add .` vÃ  `git commit -m "message"` Ä‘á»ƒ xá»­ lÃ½)

## 11. Tá»•ng káº¿t

NhÆ° váº­y, chÃºng ta Ä‘Ã£ khÃ¡m phÃ¡ 10 tÃ¬nh huá»‘ng thÆ°á»ng gáº·p trong Git. Hy vá»ng ráº±ng bÃ i viáº¿t Ä‘Ã£ mang láº¡i giÃ¡ trá»‹ cho báº¡n vÃ  giÃºp báº¡n hiá»ƒu sÃ¢u hÆ¡n vá» git. NgoÃ i ra, mÃ¬nh cÃ³ bÃ i viáº¿t Tá»•ng há»£p 15 lá»‡nh git há»¯u Ã­ch dÃ nh cho dá»± Ã¡n cá»§a báº¡n, cÃ¡c báº¡n cÃ³ thá»ƒ Ä‘á»c Ä‘á»ƒ biáº¿t thÃªm git. Cáº£m Æ¡n cÃ¡c báº¡n Ä‘Ã£ Ä‘á»c
